# iFlow 上下文信息

## 项目概述

这是一个用 Go 语言开发的 Windows 平台全局翻译工具。该工具允许用户通过快捷键快速截取屏幕上的文字区域，进行 OCR 识别，并将识别出的文字翻译成目标语言后以浮动窗口的形式显示在屏幕上。

### 核心功能

1. **全局快捷键触发** - 用户可以通过预设的快捷键（如 Alt+T）激活翻译功能
2. **屏幕区域选择** - 激活后用户可以拖拽选择需要翻译的屏幕区域
3. **OCR 文字识别** - 对选择的区域进行光学字符识别，提取文字内容
4. **多语言翻译** - 将识别出的文字通过 AI-API 翻译成目标语言
5. **浮动窗口显示** - 在屏幕上显示翻译结果的透明浮动窗口
6. **连续翻译** - 支持连续空格自动翻译成中文的功能
7. **系统托盘集成** - 程序在后台运行，通过系统托盘图标进行控制

### 技术栈

- **编程语言**: Go (版本 1.22.2)
- **GUI 框架**: lxn/walk (Windows GUI)
- **OCR 引擎**: Tesseract OCR
- **图像处理**: disintegration/imaging
- **系统 API**: Windows API 封装

## 项目架构

采用分层架构设计，分为用户交互层、核心服务层和系统 API 层。

### 主要模块

1. **全局快捷键监听模块 (hotkey)** - 负责注册和监听全局快捷键
2. **屏幕区域选择模块 (selection)** - 提供屏幕区域选择功能
3. **屏幕捕获服务模块 (capture)** - 实现屏幕截图功能
4. **OCR 识别服务模块 (ocr)** - 集成 OCR 引擎进行文字识别
5. **翻译处理服务模块 (translate)** - 集成多种翻译 API
6. **浮动窗口显示模块 (ui)** - 显示翻译结果的透明浮动窗口
7. **系统托盘模块 (tray)** - 程序后台运行时的系统托盘图标
8. **配置管理模块 (config)** - 管理用户配置和偏好设置

## 开发相关信息

### 构建和运行

目前项目处于开发阶段，具体的构建和运行命令需要根据实际的构建脚本或 Makefile 来确定。建议查看项目根目录下的构建配置文件或文档获取详细信息。

### 开发阶段

项目开发计划分为五个阶段：
1. 基础框架搭建
2. 核心功能实现
3. 用户界面实现
4. 高级功能和优化
5. 产品发布

目前应该处于第一阶段：基础框架搭建。

已完成的模块：
- 全局快捷键监听模块 (hotkey) - 已完成设计和实现，包括单元测试

进行中的模块：
- 无

待开发的模块：
- 屏幕区域选择模块 (selection)
- 屏幕捕获服务模块 (capture)
- OCR 识别服务模块 (ocr)
- 翻译处理服务模块 (translate)
- 浮动窗口显示模块 (ui)
- 系统托盘模块 (tray)
- 配置管理模块 (config)

### 目标用户

- 需要频繁翻译屏幕文字的用户
- 学习外语的人员
- 国际化办公环境中的工作人员

### 系统要求

- Windows 7 及以上版本
- 管理员权限（用于注册全局热键）

## 开发进度详情

### 全局快捷键监听模块 (hotkey)

该模块已经完成开发和测试，具体包括：

1. **功能实现**：
   - 热键数据结构定义
   - 热键管理器实现
   - Windows API集成
   - 消息循环处理机制

2. **测试**：
   - 基本热键监听测试
   - 多热键监听测试
   - 提供了完整的测试说明文档

3. **使用说明**：
   - 提供了详细的API说明和使用示例
   - 说明了编译和运行的注意事项

该模块已经可以正常工作，能够监听指定的全局热键组合，并通过回调函数处理热键事件。